<!DOCTYPE html>
<html lang="id">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Dicoding Stories - Platform berbagi cerita komunitas Dicoding"
    />
    <link rel="shortcut icon" href="/favicon.png" />
    <title>Dicoding Stories</title>

    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script type="module" src="/scripts/index.js"></script>
  </head>
  <body>
    <a href="#main-content" class="skip-link">Lewati ke konten utama</a>

    <header role="banner">
      <div class="main-header container">
        <a class="brand-name" href="#/" aria-label="Beranda Dicoding Stories">
          ðŸ“– Dicoding Stories
        </a>

        <nav
          id="navigation-drawer"
          class="navigation-drawer"
          role="navigation"
          aria-label="Menu utama"
        >
          <ul id="nav-list" class="nav-list">
            <li><a href="#/">Beranda</a></li>
            <li><a href="#/add">Tambah Story</a></li>
            <li><a href="#/about">Tentang</a></li>
          </ul>
        </nav>

        <button
          id="drawer-button"
          class="drawer-button"
          aria-label="Buka menu navigasi"
          aria-expanded="false"
          aria-controls="navigation-drawer"
        >
          â˜°
        </button>
      </div>
    </header>

    <main
      id="main-content"
      class="main-content"
      role="main"
      tabindex="-1"
    ></main>

    <script>
      if ("startViewTransition" in document) {
        const originalPushState = history.pushState;
        const originalReplaceState = history.replaceState;

        history.pushState = function (...args) {
          document.startViewTransition(() => {
            originalPushState.apply(history, args);
            window.dispatchEvent(new PopStateEvent("popstate"));
          });
        };

        history.replaceState = function (...args) {
          document.startViewTransition(() => {
            originalReplaceState.apply(history, args);
            window.dispatchEvent(new PopStateEvent("popstate"));
          });
        };

        window.addEventListener("hashchange", (event) => {
          if (!event.detail?.skipTransition) {
            document.startViewTransition(() => {
              // Transition akan ditangani oleh event listener di app.js
            });
          }
        });
      }
    </script>
  </body>
</html>
